# CLAUDE.md

> Auto-generated by DocGen — AI Development Document Generator

## Project: Geth에서 ethrex로 안전하게 마이그레이션하는 CLI MVP를 설계하고 싶습니다. 핵

## PRD Summary

---
생성일: 2026-02-22
아이디어: Geth에서 ethrex로 안전하게 마이그레이션하는 CLI MVP를 설계하고 싶습니다. 핵심은 데이터 변환, 무결성 검증, 롤백 지원입니다.
버전: 1.0
프로젝트 유형: cli
---

```markdown
# PRD: Geth → Ethrex 마이그레이션 CLI MVP

---

## 1. 프로젝트 개요

이 프로젝트는 **Geth**(Go-Ethereum)의 로컬 데이터베이스(leveldb 기반)를 **Ethrex**(고성능, 모듈식 Ethereum 클라이언트)의 데이터 포맷으로 안전하게 마이그레이션하는 커맨드라인 인터페이스(CLI) 최소 기능 제품(MVP)을 설계 및 구현합니다.  
마이그레이션 과정에서 **데이터 무결성 보장**, **롤백 지원**, **진행 상황 로깅**, **에러 재시도 메커니즘**을 핵심으로 하며, Geth의 블록체인 데이터(채널, 상태, 트랜잭션, 수신자, 블록 헤더 등)를 Ethrex가 이해할 수 있는 구조로 변환합니다.  
이 CLI는 개발자 및 운영자가 블록체인 노드를 안전하게 교체할 수 있도록 지원하며, **시스템 다운타임을 최소화**하고 **데이터 손실을 제로**로 유지하는 것을 최우선 목표로 합니다.

---

## 2. 목표 및 비목표

### ✅ 목표
- Geth의 `geth/chaindata` 디렉터리 내 데이터를 Ethrex의 데이터 구조로 정확히 변환
- 변환 과정 중 데이터 손실 없이 무결성 검증 수행 (해시 기반 검증 + 구조적 일관성 검사)
- 마이그레이션 실패 시 원본 상태로 자동 롤백 기능 제공
- 진행 상황을 실시간 로그로 출력 (진행률, 처리된 블록 수, 에러 수 등)
- 일시적 오류(파일 잠금, I/O 지연, 네트워크 장애 등)에 대해 자동 재시도 메커니즘 구현
- CLI 사용자에게 명확한 오류 메시지 및 해결 가이드 제공


## Architecture Overview

---
생성일: 2026-02-22
아이디어: Geth에서 ethrex로 안전하게 마이그레이션하는 CLI MVP를 설계하고 싶습니다. 핵심은 데이터 변환, 무결성 검증, 롤백 지원입니다.
버전: 1.0
프로젝트 유형: cli
---

```markdown
# Geth → Ethrex 마이그레이션 CLI MVP 시스템 아키텍처 문서

## 1. 아키텍처 개요

이 프로젝트는 Geth(Go-Ethereum)의 로컬 데이터 저장소(블록체인 데이터, 상태 트리, 블록 헤더 등)를 Ethrex(가상의 고성능, 모듈러 Ethereum 클라이언트) 호환 형식으로 안전하게 마이그레이션하는 명령줄 도구입니다. 핵심 목표는 **데이터 무결성 보장**, **롤백 가능성**, **장애 시 탄력성**입니다.

시스템은 단일 프로세스 CLI 애플리케이션으로 구성되며, 다음 5가지 핵심 원칙을 따릅니다:

- **모듈화**: 각 기능(파싱, 변환, 검증, 롤백, 로깅)은 독립적인 컴포넌트로 분리.
- **무상태 변환**: 원본 데이터는 절대 수정되지 않음. 변환 결과는 별도의 출력 디렉토리에 기록.
- **검증 주도**: 모든 변환 단계 후 무결성 검증을 강제 실행.
- **재시도 + 백오프**: 네트워크/디스크 오류 시 지수 백오프 기반 재시도.
- **디그레이드 모드**: 파싱 실패 시 최소한의 로그와 상태 저장으로 시스템 종료 (SYSTEM_BASELINE 준수).

---

## 2. 시스템 구성도 (Mermaid Flowchart)

```mermaid
flowchart TD
    A[CLI 시작] --> B[설정 로드]
    B --> C[원본 Geth 데이터 디렉토리 탐색]

## Tech Stack

---
생성일: 2026-02-22
아이디어: Geth에서 ethrex로 안전하게 마이그레이션하는 CLI MVP를 설계하고 싶습니다. 핵심은 데이터 변환, 무결성 검증, 롤백 지원입니다.
버전: 1.0
프로젝트 유형: cli
---

```markdown
# Geth → Ethrex 마이그레이션 CLI MVP 기술 스택 분석 및 추천

## 1. 카테고리별 기술 선택

| 카테고리 | 선택 기술 | 버전 권장사항 |
|----------|-----------|----------------|
| **프로그래밍 언어** | Python 3.11+ | 3.11.6+ |
| **CLI 프레임워크** | Typer + Click | Typer 0.11.0+, Click 8.1.7+ |
| **이더리움 데이터 처리** | Web3.py | 6.15.0+ |
| **데이터 변환/직렬화** | Pydantic | 2.7.0+ |
| **데이터 저장/상태 관리** | SQLite3 (내장) | Python 내장 |
| **검증/해시** | hashlib, eth-hash | hashlib (내장), eth-hash 0.4.0+ |

---

*Generated at 2026-02-22T16:13:34.008Z*
